<cdk-virtual-scroll-viewport
		[itemSize]="rowHeight"
		[ngStyle]="{minHeight: minTableHeight}"
		[perfectScrollbar]
		(psScrollY)="onScroll()">
	<perfect-scrollbar>
		<table>
			<tbody>
			<ng-container *cdkVirtualFor="let row of grid.getRows();let i = index">
				<tr #rowElements
				    (click)="userSelectRow.emit(row)"
				    (mouseover)="rowHover.emit(row)"
				    [className]="rowClassFunction(row)"
				    [ngClass]="{selected: row.isSelected, pageFinish: !((i+1)%grid.pagingSource.getPaging().perPage)}"
				    class="ng2-smart-row">
					<td (click)="multipleSelectRow.emit(row)"
					    *ngIf="isMultiSelectVisible"
					    class="ng2-smart-actions ng2-smart-action-multiple-select"
					    [ngStyle]="{width : grid.widthMultipleSelectCheckBox}">
						<input [ngModel]="row.isSelected" #multipleSelectCheckBox
						       class="form-control"
						       type="checkbox">
					</td>
					<td *ngIf="!row.editing && showActionColumnLeft"
					    [ngStyle]="{width : grid.widthActions}"
					    class="ng2-smart-actions">
						<div #actionsLeft [style.width]="'fit-content'">
							<ng2-st-tbody-custom (custom)="custom.emit($event)"
							                     [grid]="grid"
							                     [row]="row"
							                     [source]="source"
							                     [style.whiteSpace]="'nowrap'"></ng2-st-tbody-custom>
							<ng2-st-tbody-edit-delete [grid]="grid"
							                          [deleteConfirm]="deleteConfirm"
							                          [saveUpdateConfirm]="saveUpdateConfirm"
							                          (editRowSelect)="editRowSelect.emit($event)"
							                          [row]="row"
							                          [source]="source"
							                          [style.whiteSpace]="'nowrap'">
							</ng2-st-tbody-edit-delete>
						</div>
					</td>
					<td
							*ngIf="row.editing && showActionColumnLeft"
							[ngStyle]="{width : grid.widthActions}"
							class="ng2-smart-actions">
						<div #actionsUpdate [style.width]="'fit-content'"
						     *ngIf="!grid.getSetting().editSeparate">
							<ng2-st-tbody-update-cancel [saveUpdateConfirm]="saveUpdateConfirm"
							                            [grid]="grid"
							                            [row]="row"
							                            (finishEditRowSelect)="finishEditRowSelect.emit()"
							></ng2-st-tbody-update-cancel>
						</div>
					</td>
					<td *ngFor="let cell of row.cells"
					    [style.width]="cell.getColumn().width">
						<ng2-smart-table-cell [cell]="cell"
						                      [grid]="grid"
						                      [row]="row"
						                      [isNew]="false"
						                      [saveUpdateConfirm]="saveUpdateConfirm"
						                      [inputClass]="editInputClass"
						                      [isInEditing]="row.editing">
						</ng2-smart-table-cell>
					</td>
					<td *ngIf="row.editing && showActionColumnRight"
					    [ngStyle]="{width : grid.widthActions}"
					    class="ng2-smart-actions">
						<div #actionsUpdate [style.width]="'fit-content'"
						     *ngIf="!grid.getSetting().editSeparate">
							<ng2-st-tbody-update-cancel [saveUpdateConfirm]="saveUpdateConfirm"
							                            [grid]="grid"
							                            [row]="row"
							                            (finishEditRowSelect)="finishEditRowSelect.emit()">
							</ng2-st-tbody-update-cancel>
						</div>
					</td>
					<td *ngIf="!row.editing && showActionColumnRight"
					    [ngStyle]="{width : grid.widthActions}"
					    class="ng2-smart-actions">
						<div #actionsRight [style.width]="'fit-content'">
							<ng2-st-tbody-custom (custom)="custom.emit($event)"
							                     [grid]="grid"
							                     [row]="row"
							                     [source]="source"></ng2-st-tbody-custom>
							<ng2-st-tbody-edit-delete [grid]="grid"
							                          [deleteConfirm]="deleteConfirm"
							                          [saveUpdateConfirm]="saveUpdateConfirm"
							                          [row]="row"
							                          [source]="source"
							                          (editRowSelect)="editRowSelect.emit($event)">
							</ng2-st-tbody-edit-delete>
						</div>
					</td>
					<td *ngIf="showColumnForShowHiddenColumns && grid.getHideColumns().length"
					    [ngStyle]="{width : grid.getNoHideColumns().length?grid.widthShowHiddenColumns:'100%'}"
					    class="ng2-smart-show-hidden-columns">
						<div #actionShowHiddenColumns
						     [style.width]="'fit-content'"
						     [style.whiteSpace]="'nowrap'"
						     [innerHTML]="(row.showHiddenColumns
						     ?grid.getSetting().showHiddenColumns.clickHtmlObjectHide
						     :grid.getSetting().showHiddenColumns.clickHtmlObjectShow) | sanitizeHtml"
						     (click)="showHiddenColumns(row)"></div>
					</td>
				</tr>
				<tr *ngIf="row.showHiddenColumns && grid.getHideColumns().length">
					<td *ngIf="isMultiSelectVisible"></td>
					<td *ngIf="showActionColumnLeft"></td>
					<td [attr.colspan]="'100'">
						<table [style.tableLayout]="'auto'">
							<tr *ngFor="let cell of row.hiddenCells">
								<td class="ng2-smart-hidden-title">{{cell.getTitle()}}:</td>
								<td class="ng2-smart-hidden-cell">
									<ng2-smart-table-cell [style.width]="'100%'"
									                      [cell]="cell"
									                      [grid]="grid"
									                      [row]="row"
									                      [isNew]="false"
									                      [saveUpdateConfirm]="saveUpdateConfirm"
									                      [inputClass]="editInputClass"
									                      [isInEditing]="row.editing">
									</ng2-smart-table-cell>
								</td>
							</tr>
						</table>
					</td>
				</tr>
			</ng-container>
			<tr *ngIf="grid.getRows().length == 0 ">
				<td [attr.colspan]="tableColumnsCount">
					{{ noDataMessage }}
				</td>
			</tr>
			</tbody>
		</table>
	</perfect-scrollbar>
</cdk-virtual-scroll-viewport>
